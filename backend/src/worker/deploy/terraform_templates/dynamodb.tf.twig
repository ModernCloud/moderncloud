resource "aws_dynamodb_table" "{{project.name}}_{{environment.name}}_{{table.name}}" {
  name           = "{{table.name}}"
  read_capacity  = {{table.read_capacity}}
  write_capacity = {{table.write_capacity}}
  hash_key       = "{{table.hash_key}}"
  range_key      = "{{table.range_key}}"

  {% for attribute in table.attributes %}
    attribute {
      name = "{{attribute.name}}"
      type = "{{attribute.type}}"
    }

  {% endfor %}
}

output "{{table.name}}_id" {
  value = aws_dynamodb_table.{{project.name}}_{{environment.name}}_{{table.name}}.id
}

output "{{table.name}}_arn" {
  value = aws_dynamodb_table.{{project.name}}_{{environment.name}}_{{table.name}}.arn
}