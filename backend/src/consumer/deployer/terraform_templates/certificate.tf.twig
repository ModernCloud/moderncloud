{% if environment.domain_name|trim|length > 0 %}
    resource "aws_acm_certificate" "{{ project.name }}_{{ environment.name }}_certificate" {
        domain_name = "{{ environment.domain_name }}"
        validation_method = "DNS"

        lifecycle {
            create_before_destroy = true
        }
    }

    output "domain_validation_options" {
        value = aws_acm_certificate.{{ project.name }}_{{ environment.name }}_certificate.domain_validation_options
    }

    output "domain_validation_status" {
        value = aws_acm_certificate.{{ project.name }}_{{ environment.name }}_certificate.status
    }
{% endif %}